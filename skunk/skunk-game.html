<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skunk Dice Scorekeeper</title>
    <style>
        :root {
            --primary: #4a90e2;
            --danger: #e74c3c;
            --success: #2ecc71;
            --dark: #2c3e50;
            --light: #ecf0f1;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--dark);
            color: var(--light);
            text-align: center;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 { margin-bottom: 10px; font-size: 1.5rem; }

        /* Scoreboard */
        .scoreboard {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 400px;
        }

        .player-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            flex: 1;
            transition: all 0.3s;
        }

        .player-card.active {
            background: var(--primary);
            box-shadow: 0 0 15px var(--primary);
            transform: scale(1.05);
        }

        .score { font-size: 2.5rem; font-weight: bold; }
        .label { font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; }

        /* Current Turn Pot */
        .pot-container {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }
        .pot-score { font-size: 3rem; color: var(--success); font-weight: bold; }

        /* Dice Display */
        .dice-display {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 20px;
            height: 60px;
        }
        
        .die-placeholder {
            width: 60px;
            height: 60px;
            border: 2px dashed #7f8c8d;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            background: rgba(255,255,255,0.05);
        }

        .die-placeholder.filled {
            border: 2px solid var(--light);
            background: var(--light);
            color: var(--dark);
        }

        /* Keypad */
        .controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            width: 100%;
            max-width: 300px;
        }

        button {
            border: none;
            border-radius: 8px;
            padding: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            touch-action: manipulation; /* Improves mobile touch response */
        }

        .btn-num { background-color: var(--light); color: var(--dark); }
        .btn-num:active { background-color: #bdc3c7; }

        .btn-bank {
            grid-column: span 3;
            background-color: var(--success);
            color: white;
            font-size: 1.5rem;
            margin-top: 10px;
        }

        .btn-reset {
            margin-top: 30px;
            background: transparent;
            color: #7f8c8d;
            font-size: 0.8rem;
        }

        /* Message Overlay */
        #message {
            min-height: 20px;
            color: var(--danger);
            font-weight: bold;
            margin-bottom: 10px;
        }

    </style>
</head>
<body>

    <h1>Skunk Scorekeeper</h1>

    <div class="scoreboard">
        <div class="player-card active" id="p1-card">
            <div class="label">Player 1</div>
            <div class="score" id="score-0">0</div>
        </div>
        <div class="player-card" id="p2-card">
            <div class="label">Player 2</div>
            <div class="score" id="score-1">0</div>
        </div>
    </div>

    <div class="pot-container">
        <div class="label">Current Turn Pot</div>
        <div class="pot-score" id="current-pot">0</div>
        <div id="message"></div>
    </div>

    <div class="dice-display">
        <div class="die-placeholder" id="die-1">?</div>
        <div class="die-placeholder" id="die-2">?</div>
    </div>

    <p style="font-size: 0.9rem; opacity: 0.7;">Tap what you rolled:</p>

    <div class="controls">
        <button class="btn-num" onclick="inputDie(1)">1 ü¶®</button>
        <button class="btn-num" onclick="inputDie(2)">2</button>
        <button class="btn-num" onclick="inputDie(3)">3</button>
        <button class="btn-num" onclick="inputDie(4)">4</button>
        <button class="btn-num" onclick="inputDie(5)">5</button>
        <button class="btn-num" onclick="inputDie(6)">6</button>
        
        <button class="btn-bank" onclick="bankPoints()">BANK POINTS üè¶</button>
    </div>

    <button class="btn-reset" onclick="resetGame()">Reset Game</button>

    <script>
        // Game State
        let scores = [0, 0];
        let currentPot = 0;
        let activePlayer = 0; // 0 for Player 1, 1 for Player 2
        let diceBuffer = []; // Stores the inputs for the current roll (needs 2 inputs)
        const winningScore = 100;

        // UI Elements
        const uiPot = document.getElementById('current-pot');
        const uiMsg = document.getElementById('message');
        const die1Display = document.getElementById('die-1');
        const die2Display = document.getElementById('die-2');

        function updateUI() {
            document.getElementById('score-0').innerText = scores[0];
            document.getElementById('score-1').innerText = scores[1];
            uiPot.innerText = currentPot;
            
            // Toggle active class
            document.getElementById('p1-card').classList.toggle('active', activePlayer === 0);
            document.getElementById('p2-card').classList.toggle('active', activePlayer === 1);
        }

        // Handle Number Inputs
        function inputDie(num) {
            uiMsg.innerText = ""; // Clear warnings
            
            if (diceBuffer.length < 2) {
                diceBuffer.push(num);
                
                // Visual update
                if(diceBuffer.length === 1) {
                    die1Display.innerText = num;
                    die1Display.classList.add('filled');
                    die2Display.innerText = "?";
                    die2Display.classList.remove('filled');
                } else if (diceBuffer.length === 2) {
                    die2Display.innerText = num;
                    die2Display.classList.add('filled');
                    
                    // Small delay to let user see the number before logic runs
                    setTimeout(processRoll, 200);
                }
            }
        }

        function processRoll() {
            const d1 = diceBuffer[0];
            const d2 = diceBuffer[1];
            diceBuffer = []; // Reset buffer for next roll

            // DOUBLE SKUNK (Both are 1)
            if (d1 === 1 && d2 === 1) {
                uiMsg.innerText = "DOUBLE SKUNK! Score Wipe!";
                scores[activePlayer] = 0; // Lose TOTAL score
                currentPot = 0;
                switchPlayer();
            } 
            // SINGLE SKUNK (One is 1)
            else if (d1 === 1 || d2 === 1) {
                uiMsg.innerText = "SKUNK! Turn Over.";
                currentPot = 0; // Lose current pot
                switchPlayer();
            } 
            // SAFE ROLL
            else {
                const rollTotal = d1 + d2;
                currentPot += rollTotal;
                
                // Clear dice visuals after a moment so they know they can roll again
                setTimeout(() => {
                    die1Display.classList.remove('filled');
                    die2Display.classList.remove('filled');
                    die1Display.innerText = "?";
                    die2Display.innerText = "?";
                }, 500);
            }
            updateUI();
        }

        function bankPoints() {
            if (currentPot === 0 && diceBuffer.length === 0) {
                uiMsg.innerText = "Roll first!";
                return;
            }
            
            // Add pot to total
            scores[activePlayer] += currentPot;
            currentPot = 0;
            
            // Check Win
            if (scores[activePlayer] >= winningScore) {
                uiMsg.style.color = "var(--success)";
                uiMsg.innerText = `PLAYER ${activePlayer + 1} WINS! üéâ`;
                // Disable controls essentially by not switching
            } else {
                switchPlayer();
            }
            
            // Reset dice visuals
            die1Display.classList.remove('filled');
            die2Display.classList.remove('filled');
            die1Display.innerText = "?";
            die2Display.innerText = "?";
            
            updateUI();
        }

        function switchPlayer() {
            activePlayer = activePlayer === 0 ? 1 : 0;
            updateUI();
        }

        function resetGame() {
            if(confirm("Start a new game?")) {
                scores = [0, 0];
                currentPot = 0;
                activePlayer = 0;
                diceBuffer = [];
                uiMsg.innerText = "";
                uiMsg.style.color = "var(--danger)";
                die1Display.classList.remove('filled');
                die2Display.classList.remove('filled');
                die1Display.innerText = "?";
                die2Display.innerText = "?";
                updateUI();
            }
        }

        // Init
        updateUI();
    </script>
</body>
</html>